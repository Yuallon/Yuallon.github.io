<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>线性规划DOCPLEX习题  盒子分配问题 - 愿我如星君如月，夜夜流光相皎洁！</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="雨" /><meta name="description" content="英文文档的标题是 Objects in boxes，为了翻译方便我将采用 盒子分配 并且将 object &amp;ndash;&amp;gt; 小球。 盒子分配 我们采用 IBM Decision Optimization CPLEX（DOCPLEX）python模" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.69.0 with theme even" />


<link rel="canonical" href="https://yuallon.github.io/post/%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92docplex%E4%B9%A0%E9%A2%98-%E7%9B%92%E5%AD%90%E5%88%86%E9%85%8D%E9%97%AE%E9%A2%98/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.c7bc1becf36bcf6a9ebd25d2947e43a2eb745ddb0c9a32b43126fd7fa460c351.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="线性规划DOCPLEX习题  盒子分配问题" />
<meta property="og:description" content="英文文档的标题是 Objects in boxes，为了翻译方便我将采用 盒子分配 并且将 object &ndash;&gt; 小球。 盒子分配 我们采用 IBM Decision Optimization CPLEX（DOCPLEX）python模" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuallon.github.io/post/%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92docplex%E4%B9%A0%E9%A2%98-%E7%9B%92%E5%AD%90%E5%88%86%E9%85%8D%E9%97%AE%E9%A2%98/" />
<meta property="article:published_time" content="2020-11-02T00:47:54+08:00" />
<meta property="article:modified_time" content="2020-11-02T00:47:54+08:00" />
<meta itemprop="name" content="线性规划DOCPLEX习题  盒子分配问题">
<meta itemprop="description" content="英文文档的标题是 Objects in boxes，为了翻译方便我将采用 盒子分配 并且将 object &ndash;&gt; 小球。 盒子分配 我们采用 IBM Decision Optimization CPLEX（DOCPLEX）python模">
<meta itemprop="datePublished" content="2020-11-02T00:47:54&#43;08:00" />
<meta itemprop="dateModified" content="2020-11-02T00:47:54&#43;08:00" />
<meta itemprop="wordCount" content="2487">



<meta itemprop="keywords" content="DOCPLEX," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="线性规划DOCPLEX习题  盒子分配问题"/>
<meta name="twitter:description" content="英文文档的标题是 Objects in boxes，为了翻译方便我将采用 盒子分配 并且将 object &ndash;&gt; 小球。 盒子分配 我们采用 IBM Decision Optimization CPLEX（DOCPLEX）python模"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">雨</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">雨</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">线性规划DOCPLEX习题  盒子分配问题</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-11-02 </span>
        <div class="post-category">
            <a href="/categories/%E7%AE%97%E6%B3%95/"> 算法 </a>
            </div>
          <span class="more-meta"> 2487 words </span>
          <span class="more-meta"> 5 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#盒子分配">盒子分配</a></li>
        <li><a href="#总结">总结</a></li>
        <li><a href="#附录--函数解释">附录&ndash;函数解释</a></li>
        <li><a href="#参考">参考</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>英文文档的标题是 <strong>Objects in boxes</strong>，为了翻译方便我将采用   <strong>盒子分配</strong> 并且将 <strong>object &ndash;&gt; 小球</strong>。</p>
<h3 id="盒子分配">盒子分配</h3>
<p>我们采用 IBM Decision Optimization CPLEX（DOCPLEX）python模块来解决此类线性规划问题。</p>
<h4 id="问题描述">问题描述</h4>
<ul>
<li>我们希望将平面上有散落 N个小球 放入到 N个成列的盒子中。</li>
<li>盒子从左往右一次排列，序号依次递增（1号盒子在2号盒子左边）。</li>
<li>用 $B_i$ 表示第 $i$ 个盒子，$O_j$ 表示 第 $j$ 个小球。</li>
<li>我们想找到一组小球排列满足：
<ul>
<li>每一个盒子只能容纳一个小球</li>
<li>每一个小球只能被放到一个盒子里面</li>
<li>盒子与小球之间的距离总和是最小</li>
</ul>
</li>
<li>此外，当我们解决上述问题后，新增下面两个约束条件时，又该如何解决？
<ul>
<li>在第一问题基础上，我们要求小球1所在的盒子必须挨着小球2所在盒子且在左边。</li>
<li>要求小球5所在的盒子在小球6所在盒子旁边。</li>
</ul>
</li>
</ul>
<p>####如何做决策优化（decision optimization）</p>
<ul>
<li>规范分析（决策优化）是基于预期结果来进行。它需要考虑 具体方案、资源、过去和目前的情况。将这些考虑进去，你会做出更好的决策，并且能更好的控制预期结果。</li>
<li>规范分析是迈向 <em>基于洞察力行动</em> 的下一步。它通过与预测分析一起来创造价值，该预测分析根据分析数据以预测未来的结果。</li>
<li>规范分析通过最优方法来洞察下一步结果，并处理未来情况。机构可以在动态条件下快速行动并在不确定环境下做出卓越的决策以获得强大的竞争优势。</li>
<li>使 <strong>复杂决策和权衡</strong> 更自动化来更好的管理你有限的资源。</li>
<li>抓住未来机遇、减少未来风险。</li>
<li>根据情况的改变提前更新建议。</li>
<li>满足经营目标、提高消费者忠诚度、防止威胁和欺诈和 优化商业过程。</li>
</ul>
<h4 id="决策优化">决策优化</h4>
<h5 id="第一步导入doclpex模块">第一步：导入DOCLPEX模块</h5>
<p>运行下面代码来导入 DOCPLEX 模块。DOCPLEX 模块包含 MP（Mathematical Programming）和 CP（Constrain Programming）两种模型。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">import sys
try:
    import docplex.mp
except:
    raise Exception(&#39;Please install docplex. See https://pypi.org/project/docplex/&#39;)
</code></pre></td></tr></table>
</div>
</div><p>如果 CPLEX 没有安装，请安装 CPLEX 社区版。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">try:
    import cplex
except:
    raise Exception(&#39;Please install CPLEX. See https://pypi.org/project/cplex/&#39;)
</code></pre></td></tr></table>
</div>
</div><h5 id="第二步导入数据">第二步：导入数据</h5>
<p>导入数据包括：盒子与小球在(x,y)平面上的坐标及其数量N。</p>
<h5 id="第三步数据准备">第三步：数据准备</h5>
<p>我们采用欧式距离来计算小球与盒子之间的距离。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">from math import sqrt

N = 15
box_range = range(1, N+1)
obj_range = range(1, N+1)

import random

o_xmax = N*10
o_ymax = 2*N
box_coords = {b: (10*b, 1) for b in box_range}

obj_coords= {1: (140, 6), 2: (146, 8), 3: (132, 14), 4: (53, 28), 
             5: (146, 4), 6: (137, 13), 7: (95, 12), 8: (68, 9), 9: (102, 18), 
             10: (116, 8), 11: (19, 29), 12: (89, 15), 13: (141, 4), 14: (29, 4), 15: (4, 28)}

# the distance matrix from box i to object j
# 盒子i和小球j之间的距离矩阵
# actually we compute the square of distance to keep integer
# 实际上我们计算距离的平方值（为了取整数值）
# this does not change the essence of the problem
# 这并没有改变问题的本质
distances = {}
for o in obj_range:
    for b in box_range:
        dx = obj_coords[o][0]-box_coords[b][0]
        dy = obj_coords[o][1]-box_coords[b][1]
        d2 = dx*dx + dy*dy
        distances[b, o] = d2
</code></pre></td></tr></table>
</div>
</div><h5 id="第四步构建规范模型">第四步：构建规范模型</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">from docplex.mp.environment import Environment
env = Environment()
env.print_information()
</code></pre></td></tr></table>
</div>
</div><p><strong>创建 DOcplex 模型</strong></p>
<p>模型包含所有约束和定义目标函数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">from docplex.mp.model import Model

# 定义DOcplex模型的名称为 boxes
mdl = Model(&#34;boxes&#34;)
</code></pre></td></tr></table>
</div>
</div><p><strong>定义决策变量</strong></p>
<ul>
<li>对于每一个盒子$B_i$和小球$O_j$，定义一个二元变量 $X_{i, j}=1$ ，当且仅当小球$O_j$被放到盒子$B_i$中。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># decision variables is a 2d-matrix
# 决策变量是一个2D矩阵
x = mdl.binary_var_matrix(box_range, obj_range, lambda ij: &#34;x_%d_%d&#34; %(ij[0], ij[1]))
</code></pre></td></tr></table>
</div>
</div><p><strong>约束表达式</strong></p>
<ul>
<li>对于 $X_{i,j}$ 二元变量矩阵，每一行或每一列的和必须等于1（因为一个盒子只能放一个小球；同样一个小球也只能放在一个盒子里面）。因此会得到 $2 \times N$ 个约束（2在此处表示：行约束$N$个，列约束$N$个）。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># one object per box
# 一个小球只能放在一个盒子里面
mdl.add_constraints(mdl.sum(x[i,j] for j in obj_range) == 1
                   for i in box_range)
    
# one box for each object
# 一个盒子只能容纳一个小球
mdl.add_constraints(mdl.sum(x[i,j] for i in box_range) == 1
                  for j in obj_range)

mdl.print_information()
</code></pre></td></tr></table>
</div>
</div><p><strong>目标函数表达式</strong></p>
<ul>
<li>目标函数：小球与盒子距离和的最小值</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># minimize total displacement
# 距离和最小
mdl.minimize( mdl.sum(distances[i,j] * x[i,j] for i in box_range for j in obj_range) )
</code></pre></td></tr></table>
</div>
</div><p>此处 distances[i, j] * x[i, j] 表示前面每一个距离值distances都对应着一个x，当x[i ,j]=1时对应的distances[i,j]表示小球小球$O_j$与盒子$B_i$真正的距离。</p>
<p><strong>模型求解</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">mdl.print_information()

assert mdl.solve(), &#34;!!! Solve of the model fails&#34;
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
mdl.report()
d1 = mdl.objective_value
#mdl.print_solution()

def make_solution_vector(x_vars):
    sol = [0]* N
    for i in box_range:
        for j in obj_range:
            if x[i,j].solution_value &gt;= 0.5:
                sol[i-1] = j
                break
    return sol

def make_obj_box_dir(sol_vec):
    # sol_vec contains an array of objects in box order at slot b-1 we have obj(b)
    return { sol_vec[b]: b+1 for b in range(N)}
    
               
sol1 = make_solution_vector(x)
print(&#34;* solution: {0!s}&#34;.format(sol1))
</code></pre></td></tr></table>
</div>
</div><h5 id="额外约束1">额外约束1</h5>
<p>我们想要求 小球$O_1$ 直接放在 小球$O_2$ 的左边（挨着）。这种情况下，小球$O_2$ 就不能被放置在 盒子$B_1$ 里面了。所以添加的约束条件为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">mdl.add_constraint(x[1,2] == 0)
</code></pre></td></tr></table>
</div>
</div><p>同样，对于盒子序号 $k\geq 2$ 时，如果 $x[k, 2]==1$，则 $x[k-1, 1]==1$。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">mdl.add_constraints(x[k-1,1] &gt;= x[k,2]
                   for k in range(2,N+1))
mdl.print_information()
</code></pre></td></tr></table>
</div>
</div><p>现在让我们再次求解并查看新的约束是否满足，小球$O_1$ 直接放在 小球$O_2$ 的左边（挨着）。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ok2 = mdl.solve()
assert ok2, &#34;solve failed&#34;
mdl.report()
d2 = mdl.objective_value
sol2 = make_solution_vector(x)
print(&#34; solution #2 ={0!s}&#34;.format(sol2))
</code></pre></td></tr></table>
</div>
</div><p>约束条件确实被满足了，预料之中<strong>目标函数值变大</strong>。</p>
<h5 id="额外约束2">额外约束2</h5>
<p>现在，我们要求 包含小球$O_5$的盒子 在 包含小球$O_6$盒子的旁边，要么在左边要么在右边。</p>
<p>换句话来讲，当 $x[k, 6]==1$ 时，$x[k-1,5]==1$ 或 $x[k+1, 5]==1$。</p>
<p>对于一些极端情况我们必须注意！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># for all k in 2..N-1 then we can use the sum on the right hand side
# 当 k值范围为[2, N-1]时，要么在左边要么在右边可以用下面的不等式来表示
mdl.add_constraints(x[k,6] &lt;= x[k-1,5] + x[k+1,5]
                  for k in range(2,N))
    
# if 6 is in box 1 then 5 must be in 2
# 如果小球6在盒子1里面，那么小球5必须在盒子2里面
mdl.add_constraint(x[1,6] &lt;= x[2,5])

# if 6 is last, then 5 must be before last
# 如果小球6在最后一个（第N=15个）盒子里面，小球5必须在前一个（N-1=14）盒子里面
mdl.add_constraint(x[N,6] &lt;= x[N-1,5])

# we solve again
# 再次求解
ok3 = mdl.solve()
assert ok3, &#34;solve failed&#34;
mdl.report()
d3 = mdl.objective_value

sol3 = make_solution_vector(x)
print(&#34; solution #3 ={0!s}&#34;.format(sol3))
</code></pre></td></tr></table>
</div>
</div><p>约束条件再次满足了，同时目标函数值更大了。</p>
<h5 id="第五步查看结果和示例分析">第五步：查看结果和示例分析</h5>
<p>使用 Matplotlib 我们把解答中小球和盒子用线段连接起来</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">import matplotlib.pyplot as plt
from pylab import rcParams
%matplotlib inline
rcParams[&#39;figure.figsize&#39;] = 12, 6

def display_solution(sol):
    obj_boxes = make_obj_box_dir(sol)
    xs = []
    ys = []
    for o in obj_range:
        b = obj_boxes[o]
        box_x = box_coords[b][0]
        box_y = box_coords[b][1]
        obj_x = obj_coords[o][0]
        obj_y = obj_coords[o][1]
        plt.text(obj_x, obj_y, str(o), bbox=dict(facecolor=&#39;red&#39;, alpha=0.5))
        plt.plot([obj_x, box_x], [obj_y, box_y])
</code></pre></td></tr></table>
</div>
</div><p><strong>第1个结果没有线段相交。</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">display_solution(sol1)
</code></pre></td></tr></table>
</div>
</div><p><strong>第2，3个结果有线段相交</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">display_solution(sol2)
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">display_solution(sol3)
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
def display(myDict, title):
    if True: #env.has_matplotlib:
        N = len(myDict)
        labels = myDict.keys()
        values= myDict.values()

        try: # Python 2
            ind = xrange(N)  # the x locations for the groups
        except: # Python 3
            ind = range(N)
        width = 0.2      # the width of the bars

        fig, ax = plt.subplots()
        rects1 = ax.bar(ind, values, width, color=&#39;g&#39;)	
        ax.set_title(title)
        ax.set_xticks([ind[i]+width/2 for i in ind])
        ax.set_xticklabels( labels )	
        #ax.legend( (rects1[0]), (title) )

        plt.show()
    else:
        print(&#34;warning: no display&#34;)
        
from collections import OrderedDict
dists = OrderedDict()
dists[&#34;d1&#34;]= d1 -8000
dists[&#34;d2&#34;] = d2 - 8000
dists[&#34;d3&#34;] = d3 - 8000
print(dists)

display(dists, &#34;evolution of distance objective&#34;)
</code></pre></td></tr></table>
</div>
</div><h3 id="总结">总结</h3>
<h3 id="附录--函数解释">附录&ndash;函数解释</h3>
<h3 id="参考">参考</h3>
<ul>
<li><a href="https://github.com/IBMDecisionOptimization/docplex-examples/blob/master/examples/mp/jupyter/boxes.ipynb"><strong>Objects in boxes</strong></a></li>
<li><a href="http://ibmdecisionoptimization.github.io/docplex-doc/">CPLEX Modeling for Python documentation</a></li>
<li><a href="https://developer.ibm.com/docloud/">Decision Optimization on Cloud</a></li>
<li>Need help with DOcplex or to report a bug? Please go <a href="https://stackoverflow.com/questions/tagged/docplex">here</a>.</li>
<li>Contact us at <a href="mailto:dofeedback@wwpdl.vnet.ibm.com">dofeedback@wwpdl.vnet.ibm.com</a>.</li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">雨</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2020-11-02
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/docplex/">DOCPLEX</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/sql%E6%9F%A5%E6%89%BE%E7%AC%ACn%E9%AB%98%E7%9A%84%E6%95%B0%E6%8D%AE/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">SQL查找第N高的数据</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/%E6%95%B0%E6%8D%AE%E6%8E%A2%E6%9F%A5/">
            <span class="next-text nav-default">数据探查</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  <span id="/post/%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92docplex%E4%B9%A0%E9%A2%98-%E7%9B%92%E5%AD%90%E5%88%86%E9%85%8D%E9%97%AE%E9%A2%98/" class="leancloud_visitors" data-flag-title="线性规划DOCPLEX习题  盒子分配问题">
		<span class="post-meta-item-text">文章阅读量 </span>
		<span class="leancloud-visitors-count">0</span>
		<p></p>
	  </span>
  <div id="vcomments"></div>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <script type="text/javascript">
    new Valine({
        el: '#vcomments' ,
        appId: 'AYiTgQH0RnfHqVrLjAG62gYk-gzGzoHsz',
        appKey: 'OSOD331RCeVUC6vbdHNAO10t',
        notify:  false ,
        verify:  false ,
        avatar:'monsterid',
        placeholder: '愿我如星君如月，夜夜流光相皎洁！-- 宋·范成大',
        visitor:  true 
    });
  </script>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:1318368321@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/Yulong93522629" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/Yuallon" class="iconfont icon-github" title="github"></a>
      <a href="https://www.weibo.com/2115265873/profile?topnav=1&amp;wvr=6&amp;is_all=1" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://space.bilibili.com/26331996" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="https://yuallon.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2020<span class="heart"><i class="iconfont icon-heart"></i></span><span>雨</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c12618f9a600c40bd024996677e951e64d3487006775aeb22e200c990006c5c7.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
